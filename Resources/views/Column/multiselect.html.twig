{##
 # This file is part of the SgDatatablesBundle package.
 #
 # (c) stwe <https://github.com/stwe/DatatablesBundle>
 #
 # For the full copyright and license information, please view the LICENSE
 # file that was distributed with this source code.
 #}
{
    {% block common %}
        "contentPadding": "{{ column.contentPadding }}",
        "defaultContent": "{{ column.defaultContent }}",
        "name": "{{ column.name }}",
        {% if column.orderable %}
            "orderable": true,
        {% else %}
            "orderable": false,
        {% endif %}
        {% if column.searchable %}
            "searchable": true,
        {% else %}
            "searchable": false,
        {% endif %}
        "title": "<input type='checkbox' name='multiselect_checkall' class='multiselect_checkall' />",
        {% if column.type %}
            "type": "{{ column.type }}",
        {% endif %}
        {% if column.visible %}
            "visible": true,
            "className": "{{ column.className }}",
        {% else %}
            "visible": false,
            "className": "never {{ column.className }}",
        {% endif %}
        "width": "{{ column.width }}",
    {% endblock %}

    {% block data %}
        "data": null,
        "render": function(data, type, row, meta) {
            var checkbox = "<input type='checkbox' name='multiselect_checkbox' value='" + first + "' class='multiselect_checkbox' />";
            var output = "";
            var startHtml = "";
            var endHtml = "";
            var attributes = "";

            {# start_html #}
            {% if column.startWrapper %}
                startHtml = '{{ column.startWrapper|raw }}';
            {% endif %}

            {# end_html #}
            {% if column.endWrapper %}
                endHtml = '{{ column.endWrapper|raw }}';
            {% endif %}

            {# attributes #}
            {% for key, value in column.attributes %}
                attributes += '{{ key }}="{{ value }}" ';
            {% endfor %}

            {# get id #}
            var first;
            for (var i in row) {
                if (row.hasOwnProperty(i) && typeof(i) !== 'function') {
                    first = row[i];
                    break;
                }
            }

            {# return html #}
            if ("" != attributes) {
                var custom = "";

                custom += startHtml;
                custom += "<input type='checkbox' value='";
                custom += first;
                custom += "'";
                custom += attributes;
                custom += "/>"
                custom += endHtml;

                return custom;
            }

            output += startHtml;
            output += checkbox;
            output += endHtml;

            return output;
        },
    {% endblock %}
},
