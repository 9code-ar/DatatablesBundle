<?php

namespace {{ namespace }}\Datatables{{ entity_namespace ? '\\' ~ entity_namespace : '' }};

{% block use_statements %}
use Sg\DatatablesBundle\Datatable\View\AbstractDatatableView;
{% endblock use_statements %}

{% block class_definition %}
/**
 * Class {{ datatable_class }}
 *
 * @package {{ namespace }}\Datatables{{ entity_namespace ? '\\' ~ entity_namespace : '' }}
 */
class {{ datatable_class }} extends AbstractDatatableView
{% endblock class_definition %}
{
{% block class_body %}
    /**
     * {@inheritdoc}
     */
    public function buildDatatableView()
    {
        $this->getFeatures()
            ->setServerSide(true)
            ->setProcessing(true);

        $this->getAjax()->setUrl($this->getRouter()->generate("{{ ajax_url }}"));
        $this->setStyle(self::BOOTSTRAP_3_STYLE);
        $this->setIndividualFiltering(true);

        $this->getColumnBuilder()
        {% for field in fields %}
        ->add("{{ field }}", "column", array("title" => "{{ field }}",))
        {% endfor %}
        ;
    }

    /**
     * {@inheritdoc}
     */
    public function getEntity()
    {
        return "{{ namespace }}\Entity{{ entity_namespace ? '\\' ~ entity_namespace : '' }}\{{ entity_class }}";
    }

    /**
     * {@inheritdoc}
     */
    public function getName()
    {
        return "{{ datatable_name }}";
    }
{% endblock class_body %}
}